<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Flipkart Style Order Flow with Real Dates</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body { background: #f4f6f9; }
    .product-card { border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
    .tracking-steps { display: flex; justify-content: space-between; margin: 30px 0; position: relative; }
    .tracking-steps::before { content: ""; position: absolute; top: 22px; left: 0; right: 0; height: 4px; background: #dee2e6; z-index: 1; }
    .step { text-align: center; width: 25%; position: relative; z-index: 2; }
    .step .icon { background: #dee2e6; color: #6c757d; border-radius: 50%; padding: 12px; font-size: 20px; display: inline-block; transition: 0.3s; }
    .step.active .icon { background: #0d6efd; color: white; }
    .step p { margin-top: 10px; font-size: 14px; }
    .thank-you { display: none; text-align: center; margin-top: 50px; }
    .thank-you h2 { font-weight: bold; color: #0d6efd; }
    .delayed { color: red; font-weight: bold; }
  </style>
</head>
<body>

<div class="container mt-5">

  <!-- Product Section -->
  <div id="productSection" class="card product-card p-4">
    <div class="row g-4 align-items-center">
      <div class="col-md-4 text-center">
        <img src="https://via.placeholder.com/250x250" class="img-fluid rounded" alt="Product">
      </div>
      <div class="col-md-8">
        <h3>Smartphone XYZ</h3>
        <p class="text-muted">High performance smartphone with 128GB storage and 6GB RAM. Fast delivery & 1 year warranty.</p>
        <h4 class="text-success mb-3">â‚¹15,999</h4>
        <button class="btn btn-primary btn-lg" onclick="startOrder()">Buy Now</button>
      </div>
    </div>
  </div>

  <!-- Tracking Section -->
  <div id="trackingSection" class="card shadow p-4 mt-4" style="display:none;">
    <h4 class="mb-4">Order Tracking</h4>
    <div class="tracking-steps">
      <div class="step" id="step1">
        <div class="icon"><i class="bi bi-bag-check"></i></div>
        <p>Order Placed<br><small id="date1"></small></p>
      </div>
      <div class="step" id="step2">
        <div class="icon"><i class="bi bi-truck"></i></div>
        <p>Shipped<br><small id="date2"></small></p>
      </div>
      <div class="step" id="step3">
        <div class="icon"><i class="bi bi-box-seam"></i></div>
        <p>Out for Delivery<br><small id="date3"></small></p>
      </div>
      <div class="step" id="step4">
        <div class="icon"><i class="bi bi-check-circle"></i></div>
        <p>Delivered<br><small id="date4"></small></p>
      </div>
    </div>
  </div>

  <!-- Thank You Section -->
  <div id="thankYouSection" class="thank-you">
    <h2><i class="bi bi-emoji-smile"></i> Thank You!</h2>
    <p>Your order has been successfully delivered. We hope you enjoy your product!</p>
    <a href="#" class="btn btn-success btn-lg" onclick="location.reload()">Shop Again</a>
  </div>
</div>

<script>
let steps = ["step1", "step2", "step3", "step4"];
let currentStep = 0;
let delayHappened = false;

// Helper function to format date (dd Mon yyyy)
function formatDate(date) {
  return date.toLocaleDateString("en-GB", { day: "numeric", month: "short", year: "numeric" });
}

// Generate planned dates from today
let today = new Date();
let plannedDates = [
  new Date(today), // order placed
  new Date(today), // shipped
  new Date(today), // out for delivery
  new Date(today)  // delivered
];
plannedDates[1].setDate(plannedDates[0].getDate() + 1);
plannedDates[2].setDate(plannedDates[1].getDate() + 1);
plannedDates[3].setDate(plannedDates[2].getDate() + 1);

function startOrder() {
  document.getElementById("productSection").style.display = "none";
  document.getElementById("trackingSection").style.display = "block";

  function nextStep() {
    if (currentStep < steps.length) {
      // simulate delay at step 2
      if (currentStep === 1 && !delayHappened) {
        delayHappened = true;
        plannedDates[1].setDate(plannedDates[1].getDate() + 1); // Shipped delayed by 1 day
        plannedDates[2].setDate(plannedDates[1].getDate() + 1);
        plannedDates[3].setDate(plannedDates[2].getDate() + 1);
        document.getElementById("date2").innerHTML = formatDate(plannedDates[1]) + " <span class='delayed'>(Delayed)</span>";
        document.getElementById("date3").innerHTML = formatDate(plannedDates[2]);
        document.getElementById("date4").innerHTML = formatDate(plannedDates[3]);
      }

      // mark current step active
      document.getElementById(steps[currentStep]).classList.add("active");
      document.getElementById("date" + (currentStep + 1)).innerText = formatDate(plannedDates[currentStep]);

      currentStep++;
      setTimeout(nextStep, 2000); // next step every 2s
    } else {
      setTimeout(() => {
        document.getElementById("trackingSection").style.display = "none";
        document.getElementById("thankYouSection").style.display = "block";
      }, 1500);
    }
  }

  nextStep();
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
