<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Postcode Search</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <style>
    body {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    main {
      flex: 1;
    }
    footer {
      background: #0d6efd;
      color: white;
      padding: 10px 0;
      text-align: center;
    }
  </style>
</head>
<body class="bg-light">

<!-- Header/Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
  <div class="container-fluid">
    <!-- Left Menu (Hamburger) -->
    <button class="btn btn-outline-light me-3" data-bs-toggle="offcanvas" data-bs-target="#sidebarMenu">
      <i class="bi bi-list"></i>
    </button>
    
    <!-- Logo / App Name -->
    <a class="navbar-brand d-flex align-items-center" href="#">
      <i class="bi bi-geo-alt-fill me-2"></i> Postcode Finder
    </a>

    <!-- Right Menu -->
    <div class="dropdown ms-auto">
      <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
        <i class="bi bi-person-circle"></i> Account
      </button>
      <ul class="dropdown-menu dropdown-menu-end">
        <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-in-right me-2"></i> Sign In</a></li>
        <li><a class="dropdown-item" href="#"><i class="bi bi-person-plus me-2"></i> Sign Up</a></li>
        <li><hr class="dropdown-divider"></li>
        <li><a class="dropdown-item" href="#"><i class="bi bi-box-arrow-right me-2"></i> Logout</a></li>
      </ul>
    </div>
  </div>
</nav>

<!-- Sidebar Menu -->
<div class="offcanvas offcanvas-start" tabindex="-1" id="sidebarMenu">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title"><i class="bi bi-list me-2"></i> Menu</h5>
    <button type="button" class="btn-close" data-bs-dismiss="offcanvas"></button>
  </div>
  <div class="offcanvas-body">
    <ul class="list-group">
      <li class="list-group-item"><i class="bi bi-calendar-check me-2"></i> Booking</li>
      <li class="list-group-item"><i class="bi bi-truck me-2"></i> Pickup</li>
      <li class="list-group-item"><i class="bi bi-question-circle me-2"></i> Inquiry</li>
      <li class="list-group-item"><i class="bi bi-clipboard-data me-2"></i> Helpdesk Status</li>
    </ul>
  </div>
</div>

<!-- Main Content -->
<main class="container mt-5">
  <h2 class="mb-4 text-center">Postcode Search</h2>
  
  <div class="input-group mb-3 shadow">
    <input type="text" id="searchBox" class="form-control" placeholder="Enter Postcode (e.g. BL1)">
    <button class="btn btn-primary" onclick="searchPostcode()">Search</button>
  </div>
</main>

<!-- Footer -->
<footer>
  <p class="mb-0">Â© 2025 Postcode Finder | Designed with <i class="bi bi-heart-fill text-danger"></i></p>
</footer>

<script>
let postcodeData = [];

// Load CSV file
async function loadCSV() {
  try {
    let response = await fetch("THURSDAY ROUTE FUTURE LIST.csv");  
    let text = await response.text();
    let rows = text.trim().split("\n").slice(1); 
    
    rows.forEach(row => {
      let cols = row.split(",");
      let district = cols[0].trim();
      let town = cols[1].trim();
      let coverage = cols[2].trim();
      let authority = cols[3].trim();
      
      postcodeData.push({ district, town, coverage, authority });
    });
  } catch (error) {
    console.error("Error loading CSV:", error);
  }
}

// Search Function
function searchPostcode() {
  let input = document.getElementById("searchBox").value.trim().toUpperCase();
  let found = postcodeData.find(p => p.district === input);
  
  if (found) {
    // Google Maps open in new tab with searched postcode
    let query = encodeURIComponent(found.district + " " + found.town);
    window.open("https://www.google.com/maps/search/?api=1&query=" + query, "_blank");
  } else {
    alert("Postcode not found in CSV!");
  }
}

// Load CSV on start
loadCSV();
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
